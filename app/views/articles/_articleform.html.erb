<%= form_with(model: @article, local: true) do |form| %>
  <%= render "shared/error_messages", object: form.object %>
  <div class="field">
    <%= form.label :title, 'タイトル' %>
    <%= form.text_field :title %>
  </div>
  <div class="field">
    <%= form.label :main_image, 'サムネイル画像' %>
    <%= form.file_field :main_image, accept: "image/png, image/jpg, image/gif, image/jpeg" %>
  </div>
  <div class="field">
    <%= form.label :content, '本文' %>
    <%= form.rich_text_area :content %>
  </div>
  <p>タグ付け</p>
  <div style="display: flex; flex-wrap: wrap;">
    <%= form.fields_for :tag do |tag_form| %>
      <% @tags.each do |key, jp| %>
        <div class="field" style="padding: 5px;">
          <%= tag_form.label key, jp %>
          <%= tag_form.check_box key, {}, true, false %>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="actions">
    <%= form.submit yield(:button_text), class: "btn btn-primary" %>
  </div>
<% end %>

<script type="text/javascript">
  $("#article_main_image").bind("change", function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert("Maximum file size is 5MB. Please choose a smaller file.");
      $("#article_main_image").val("");
    }
  });
</script>